<?xml version="1.0" encoding="ISO-8859-1"?>
<xsl:stylesheet version="1.0"
xmlns:xsl="http://www.w3.org/1999/XSL/Transform">


<xsl:template match="/">

  <xsl:element name="html">
  
  <xsl:element name="body">
 
      <xsl:variable name="spec" select="/group/@name"/>

      <xsl:variable name="testgroup" select="document(concat('../docs/tests/specs/security/',$spec,'/',$spec,'.xml'))/qa/product/testgroup"/>
                   
      <xsl:for-each select="$testgroup">
        
        <xsl:element name="title">
            <xsl:value-of select="@name"/>
             <xsl:value-of select="' Test Specification'"/>
        </xsl:element>
        
        <xsl:element name="h2">
            <xsl:attribute name="align">center</xsl:attribute>
            <xsl:value-of select="@name"/>
            <xsl:value-of select="' Test Specification'"/>
        </xsl:element>
 
        <!-- Test Group Table -->
        <xsl:element name="table">
        
          <xsl:attribute name="border">1</xsl:attribute>
          <xsl:attribute name="width">80%</xsl:attribute>

        <xsl:element name="tr">
            <xsl:attribute name="bgcolor">yellow</xsl:attribute>
            <xsl:element name="td">
              <xsl:attribute name="width">20%</xsl:attribute>
              <xsl:element name="b">
                <xsl:value-of select="'Test Group'"/>
              </xsl:element>
            </xsl:element>
            <xsl:element name="td">
                <xsl:value-of select="groupname"/>
            </xsl:element>
          </xsl:element>

          <xsl:element name="tr">
            <xsl:element name="td">
              <xsl:attribute name="width">20%</xsl:attribute>
              <xsl:element name="b">
                <xsl:value-of select="'Test Group Purpose'"/>
              </xsl:element>
            </xsl:element>
            <xsl:element name="td">
                <xsl:value-of select="grouppurpose"/>
            </xsl:element>
          </xsl:element>

          <xsl:element name="tr">
            <xsl:element name="td">
              <xsl:attribute name="width">20%</xsl:attribute>
              <xsl:element name="b">
                <xsl:value-of select="'Test Subgroup'"/>
              </xsl:element>
            </xsl:element>
            <xsl:element name="td">
                <xsl:value-of select="subgroupname"/>
            </xsl:element>
          </xsl:element>

        </xsl:element>

        <xsl:element name="br"/>
        
        <!-- Test Suite List -->
        <xsl:element name="ol">
          <xsl:for-each select="testsuite">
            <xsl:element name="li">
              <xsl:element name="a">
                <xsl:attribute name="href">
                  <xsl:value-of select="concat('#',@name)"/>
                </xsl:attribute>
                <xsl:value-of select="@name"/>
              </xsl:element>
              <xsl:value-of select="concat(' : ',purpose)"/>
            </xsl:element>
          </xsl:for-each>
        </xsl:element>

        <xsl:for-each select="testsuite">
        
          <!-- Test Suite Header -->
          <xsl:element name="h2">
            <xsl:value-of select="@name"/>
          </xsl:element>

          <!-- Test Suite Anchor -->
          <xsl:element name="a">
            <xsl:attribute name="name">
              <xsl:value-of select="@name"/>
            </xsl:attribute>
          </xsl:element>
                             
          <!-- Test Suite Table -->
          <xsl:element name="table">
          
            <xsl:attribute name="border">1</xsl:attribute>
            <xsl:attribute name="width">80%</xsl:attribute>
            
            <xsl:element name="tr">
              <xsl:attribute name="bgcolor">aqua</xsl:attribute>
              <xsl:element name="td">
                <xsl:attribute name="width">20%</xsl:attribute>
                <xsl:element name="b"> 
                  <xsl:value-of select="'Test Suite Name'"/>
                </xsl:element>
              </xsl:element>
              <xsl:element name="td">
                  <xsl:value-of select="@name"/>
              </xsl:element>
            </xsl:element>

            <xsl:element name="tr">
              <xsl:element name="td">
                <xsl:attribute name="width">20%</xsl:attribute>
                <xsl:element name="b">
                  <xsl:value-of select="'Purpose'"/>
                </xsl:element>
              </xsl:element>
              <xsl:element name="td">
                  <xsl:value-of select="purpose"/>
              </xsl:element>
            </xsl:element>

            <xsl:element name="tr">
              <xsl:element name="td">
                <xsl:attribute name="width">20%</xsl:attribute>
                  <xsl:element name="b"> 
                    <xsl:value-of select="'Suite Group'"/>
                  </xsl:element>
                </xsl:element>
                <xsl:element name="td">
                  <xsl:value-of select="group"/>
              </xsl:element>
            </xsl:element>
                                
            </xsl:element>          

            <xsl:element name="br"/>
        
            <xsl:for-each select="testcase">
        
              <!-- Test Case Table -->       
              <xsl:element name="table">
                <xsl:attribute name="border">1</xsl:attribute>
                <xsl:attribute name="width">80%</xsl:attribute>
           
              <!-- Test Name -->
              <xsl:element name="a">
                <xsl:attribute name="name">
                  <xsl:value-of select="testid"/>
                </xsl:attribute>
              </xsl:element>
              <xsl:element name="tr">
                <xsl:attribute name="bgcolor">lightblue</xsl:attribute>              
                <xsl:element name="td">
                  <xsl:attribute name="width">20%</xsl:attribute>
                  <xsl:element name="a">
                    <xsl:attribute name="width">20%</xsl:attribute>
                  </xsl:element>
                  <xsl:element name="b">
                    <xsl:value-of select="'Test Name'"/>
                  </xsl:element>
                </xsl:element>
                <xsl:element name="td">
                  <xsl:value-of select="@name"/>
                </xsl:element>
              </xsl:element>

              <!-- Test Purpose -->          
              <xsl:element name="tr">              
                <xsl:element name="td">
                  <xsl:attribute name="width">20%</xsl:attribute>
                  <xsl:element name="b"> 
                    <xsl:value-of select="'Test Purpose'"/>
                  </xsl:element>
                </xsl:element>
                <xsl:element name="td">
                  <xsl:value-of select="purpose"/>
                </xsl:element>
              </xsl:element>
                                             
              <!-- Test Script -->            
              <xsl:element name="tr">              
                <xsl:element name="td">
                <xsl:attribute name="width">20%</xsl:attribute>
                  <xsl:element name="b"> 
                    <xsl:value-of select="'Test Script'"/>
                  </xsl:element>
                </xsl:element>
                <xsl:element name="td">
                  <xsl:element name="a">
                    <xsl:attribute name="href">
                      <xsl:value-of select="concat('https://opends.dev.java.net/source/browse/opends/trunk/opends/tests/functional-tests/testcases/security/',$spec,'/',testscript)"/>
                    </xsl:attribute>
                    <xsl:value-of select="testscript"/>
                  </xsl:element>
                </xsl:element>
              </xsl:element>
                                               
              <!-- Test Issue -->            
              <xsl:element name="tr">              
                <xsl:element name="td">
                <xsl:attribute name="width">20%</xsl:attribute>
                  <xsl:element name="b"> 
                    <xsl:value-of select="'Test Issue'"/>
                  </xsl:element>
                </xsl:element>
                <xsl:element name="td">
                  <xsl:element name="a">
                    <xsl:attribute name="href">
                      <xsl:value-of select="concat('https://opends.dev.java.net/issues/show_bug.cgi?id=',testissue)"/>
                    </xsl:attribute>
                    <xsl:value-of select="testissue"/>
                  </xsl:element>
                </xsl:element>
              </xsl:element>
                                               
              <!-- Test Preamble -->          
              <xsl:element name="tr">              
                <xsl:element name="td">
                  <xsl:attribute name="width">20%</xsl:attribute>
                  <xsl:element name="b"> 
                    <xsl:value-of select="'Preamble'"/>
                  </xsl:element>
                </xsl:element>
                <xsl:element name="td">
                  <xsl:value-of select="preamble"/>
                </xsl:element>
              </xsl:element>
                                                                                     
              <!-- Test Steps -->          
              <xsl:element name="tr">              
                <xsl:element name="td">
                  <xsl:attribute name="width">20%</xsl:attribute>
                  <xsl:element name="b"> 
                    <xsl:value-of select="'Test Steps'"/>
                  </xsl:element>
                </xsl:element>
                <xsl:element name="td">
                  <xsl:for-each select="steps/step">
                    <xsl:value-of select="."/>
                    <xsl:element name="br"/>    
                  </xsl:for-each>
                </xsl:element>
              </xsl:element>
                                            
              <!-- Test Postamble -->          
              <xsl:element name="tr">              
                <xsl:element name="td">
                  <xsl:attribute name="width">20%</xsl:attribute>
                  <xsl:element name="b"> 
                    <xsl:value-of select="'Postamble'"/>
                  </xsl:element>
                </xsl:element>
                <xsl:element name="td">
                  <xsl:value-of select="postamble"/>
                </xsl:element>
              </xsl:element>
                                                                                                   
              <!-- Test Result -->          
              <xsl:element name="tr">              
                <xsl:element name="td">
                  <xsl:attribute name="width">20%</xsl:attribute>
                  <xsl:element name="b"> 
                    <xsl:value-of select="'Test Result'"/>
                  </xsl:element>
                </xsl:element>
                <xsl:element name="td">
                  <xsl:value-of select="result"/>
                </xsl:element>
              </xsl:element>
                                                                                                                    
            </xsl:element>
        
            <xsl:element name="br"/>    
    
          </xsl:for-each>
                  
        </xsl:for-each>

    </xsl:for-each>


    </xsl:element> 
     
  </xsl:element>


</xsl:template>


</xsl:stylesheet>
